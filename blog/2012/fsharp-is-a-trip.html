<!doctype html> <html> <head> <meta charset=utf-8 /> <meta http-equiv=X-UA-Compatible content="IE=edge;chrome=1"/> <meta name=viewport content="width=device-width"> <meta property="og:locale" content=en_us> <meta property="og:type" content=article> <meta property="og:title" content="F# is a Trip (or What is Function Currying)"> <meta property="og:url" content="http://array.blue/blog/2012/fsharp-is-a-trip.html"> <meta property="article:published_time" content="2012-02-11T07:00:00Z"> <meta property="article:tag" content="f#"> <meta property="article:tag" content=functional-programming> <title>[ F# is a Trip (or What is Function Currying) ].blue</title> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel=stylesheet type="text/css" media="(min-width: 767px)"> <link href="/stylesheets/all-2548ef72.css" rel=stylesheet type="text/css"/> <script src="/javascripts/all-641b3993.js"></script> </head> <body class="blog blog_2012 blog_2012_fsharp-is-a-trip" itemscope itemtype="http://schema.org/Blog"> <div class=wrapper> <header class=page> <h1 itemprop=name><a href="/">[ ].blue</a></h1> <h6 itemprop=author>Blog of <span itemprop=givenName>Titus</span> <span itemprop=familyName>Stone</span></h6> </header> <main> <article itemprop=blogPost itemscope itemtype="http://schema.org/BlogPosting"> <h1 class=title itemprop=headline>F# is a Trip (or What is Function Currying)</h1> <h4 class=date itemprop=dateCreated>February 11, 2012</h4> <div itemprop=articleBody> <p>For developers that have been living in javaland, javascriptland, or C#land for any lengthy period of time, the first encounter with a very functional language, it’s definitely weird. F# is Microsoft’s latest language addition to their .NET kingdom. It’s a functional/object oriented hybrid language which leans more towards the functional side and finds it’s roots in OCaml.</p> <p>Quite frankly, it has some of the coolest features you’ll find on .NET at the moment, which head and shoulders above the rest of the .NET languages is the interpreter. Further, the integration of the interpreter with Visual Studio reminds me of a Paul Graham quote from Hackers and Painters, (paraphrased) “programming languages should be for programmers to sketch in”.</p> <p>It works like this:</p> <ul> <li>Highlight code you’d like to execute</li> <li>Press Alt+Enter</li> <li>The code runs and the result appears in a console below the code, directly in Visual Studio</li> </ul> <p>As it turns out the interactive console is also great for language exploration. The syntax of F# is a bit more minimal than you’d expect coming from C#. Functions are defined just like values using an = where parameters aren’t wrapped in parenthesis.</p> <div class=highlight><pre class="highlight plaintext"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class=rouge-code><pre>let increment x = x + 1
</pre></td></tr></tbody></table></code></pre></div> <p>Running that in the interpreter returns</p> <div class=highlight><pre class="highlight plaintext"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class=rouge-code><pre>val increment : int -&gt; int
</pre></td></tr></tbody></table></code></pre></div> <p>Two really important things are in that line. First, F# inferred the type. No where in the code is int specified as the type. F# is a strongly typed language, but it will infer the type.</p> <p>The second important thing is that F# returned to us the type signature of the function. This type signature business is reminiscent of languages like Scala and Haskell. <code>int -&gt; int</code> — It basically means one integer is inputted and one integer is outputted.</p> <p>But things get more interesting. The increment function could be given a more broad usage.</p> <div class=highlight><pre class="highlight plaintext"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class=rouge-code><pre>let add x y = x + y
</pre></td></tr></tbody></table></code></pre></div> <p>Interpreting the new function add returns</p> <div class=highlight><pre class="highlight plaintext"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class=rouge-code><pre>val add : int -&gt; int -&gt; int
</pre></td></tr></tbody></table></code></pre></div> <p>That is not what one would expect. The way the function is written is the average developer would expect a type signature of</p> <div class=highlight><pre class="highlight plaintext"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class=rouge-code><pre>val add : int, int -&gt; int
</pre></td></tr></tbody></table></code></pre></div> <p>But that’s not what F# is returning. Reading the type signature, it appears that F# is interpreting the add function as two functions which it turns out is the case. If the lack of <code>()</code>’s on the functions was odd at first, then this is part of the reason why. For each parameter on a function, behind the scenes F# makes a new function that returns a function. (It’s not called a “functional language” for nothin’)</p> <p>Why does all of this matter however? Is it just compiler trickery or is there any use for this? Because F# is internally creating a function for each additional parameter past the first one, if only <em>some</em> of the arguments were to be passed into <code>add</code>, what would be returned would not be a result, but another function.</p> <p>Consider</p> <div class=highlight><pre class="highlight plaintext"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class=rouge-code><pre>let add x y = x + y
let increment = add 1

&gt; val increment : (int -&gt; int)

let a = increment 2

&gt; val a : int = 3
</pre></td></tr></tbody></table></code></pre></div> <p>The type signature for increment is <code>int -&gt; int</code>! Increment is a partially applied function. It executions <em>some</em> of the parameters of <code>add</code>.</p> <p>This is function currying.</p> <p>It’s a trip.</p> </div> </article> </main> </div> <footer> <span>&copy; Titus Stone</span> <a href="/">Home</a> <a href="//github.com/tstone">Github</a> <a href="//twitter.com/andstuff">Twitter</a> </footer> <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-32115012-1', 'auto');
        ga('send', 'pageview');
      </script> </body> </html>
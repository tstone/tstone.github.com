<!doctype html> <html> <head> <meta charset=utf-8 /> <meta http-equiv=X-UA-Compatible content="IE=edge;chrome=1"/> <meta name=viewport content="width=device-width"> <meta property="og:locale" content=en_us> <meta property="og:type" content=article> <meta property="og:title" content="5 Reasons to Consider Tornado for AppEngine (Python)"> <meta property="og:url" content="http://array.blue/blog/2010/5-reasons-to-consider-tornado.html"> <meta property="article:published_time" content="2010-09-09T07:00:00Z"> <meta property="article:tag" content=python> <meta property="article:tag" content=webapp> <meta property="article:tag" content=appengine> <meta property="article:tag" content=tornado> <title>[ 5 Reasons to Consider Tornado for AppEngine (Python) ].blue</title> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel=stylesheet type="text/css" media="(min-width: 767px)"> <link href="/stylesheets/all-2548ef72.css" rel=stylesheet type="text/css"/> <script src="/javascripts/all-641b3993.js"></script> </head> <body class="blog blog_2010 blog_2010_5-reasons-to-consider-tornado" itemscope itemtype="http://schema.org/Blog"> <div class=wrapper> <header class=page> <h1 itemprop=name><a href="/">[ ].blue</a></h1> <h6 itemprop=author>Blog of <span itemprop=givenName>Titus</span> <span itemprop=familyName>Stone</span></h6> </header> <main> <article itemprop=blogPost itemscope itemtype="http://schema.org/BlogPosting"> <h1 class=title itemprop=headline>5 Reasons to Consider Tornado for AppEngine (Python)</h1> <h4 class=date itemprop=dateCreated>September 9, 2010</h4> <div itemprop=articleBody> <p>As I’ve begun to become better acquainted with <a href="//code.google.com/appengine/">Google’s AppEngine platform</a>, I’ve hit a few points where the python-based <a href="//code.google.com/appengine/docs/python/.../usingwebapp.html">“webapp” framework</a> is less than desirable.</p> <p>While I have a background in <a href="//www.django.com/">Django</a>, I didn’t feel as if it was a fit for AppEngine due to it’s heavy data layer ties. On the flip side, <a href="//www.tornadoweb.org/">Tornado</a> (IMHO) is a lightweight alternative and prime candidate.</p> <p>Tornado, if you don’t know, is the web framework that powers FriendFeed and was recently open sourced by Facebook. It includes the basics you’d expect: request handling, routing, templating; you know, the usual fare. A scatter of MySQL utilities come bundled, but the framework leaves the data layer completely up to you (consequently it doesn’t including features like an automatic administrative interface or data models-to-web forms).</p> <h3>1. May the Source Be With You</h3> <p>Sure, webapp has <a href="//code.google.com/appengine/docs/python/gettingstarted/usingwebapp.html">online documentation</a>, but sometimes it’s easier to just <a href="//github.com/facebook/tornado/tree/master/tornado/">read the source</a>. Even better, in Tornado’s case it’s available via GitHub.</p> <p>Depending on your experience with python this might not sound like a compelling reason but consider this: You will likely have the tornado source folder inside of your project’s folder while developing (as it needs to be deployed to AppEngine with the rest of your python source files). This means you can simply open up the Tornado source files in another tab in your editor for quick reference.</p> <p>Once you get used to doing this it greatly speeds up your development time when you need to reference something and it gets you much more acquainted with how the framework works.</p> <h3>2. Simple Templating</h3> <p>There are quite a few good templating engines out there for python. The problem I have with many of them is that they typically are too complicated or unnatural in syntax or too restrictive for in form, particularly when it comes to creating re-usable sub-templates which manage their own logic and data independent of the main page (I’m referring to what Django and other engines call “template tags”).</p> <p>Before I mention tags a few words about the Tornado template engine — it’s simple. It uses the common <code>{% %}</code> format. It lets you put real python in between the <code>{% %}</code>’s Sure, people say logic should be out of the template, however if it’s logic that relates to display I disagree. Tornado gives you the choice. If you want it, use it. If not, do it the hard way. It’s up to you.</p> <p>Behind the scenes Tornado compiles the templates to a python file to make them speedy when serving to viewers (this has the odd side effect of requiring you to restart the appengine dev server whenever you change the template).</p> <p>The one slip up is that if you, like me, are used to Django-style templates, you’ll probably write things like <code>{% endblock %}</code> or <code>{% endif %}</code>. Tornado simply uses <code>{% end %}</code> for everything.</p> <h3>3. Drop-Dead Easy Template Tags</h3> <p>So about template tags, Tornado refers to them as “UI modules”. Defining a new module is dead simple…</p> <div class=highlight><pre class="highlight python"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class=rouge-code><pre><span class="k">class</span> <span class="nc">SchemePreviewSmall</span><span class="p">(</span><span class="n">BaseUIModule</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scheme</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s">'python'</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">handler</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get_something_cool</span><span class="p">(</span><span class="n">scheme</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">render_string</span><span class="p">(</span><span class="s">'modules/scheme-preview-small.html'</span><span class="p">,</span>
                                  <span class="n">scheme</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                                  <span class="n">lang</span><span class="o">=</span><span class="n">lang</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div> <p>In this example I’m calling the method <code>get_something_cool</code> which is actually a member of the calling <code>RequestHandler</code> (<code>self.handler</code>). The return value is then used to generate the response by loading and rendering a template. The nice thing here is that if I have a re-usable widget such as an ad, a login interface, whatever I can make it a module and re-use it throughout the site.</p> <p>Using this module in a template is as easy as…</p> <div class=highlight><pre class="highlight liquid"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class=rouge-code><pre><span class="p">{{</span><span class="w"> </span><span class="nv">modules</span><span class="p">.</span><span class="nv">SchemePreviewSmall</span><span class="err">(</span><span class="nv">scheme</span><span class="err">)</span><span class="w"> </span><span class="p">}}</span>
</pre></td></tr></tbody></table></code></pre></div> <h3>4. Easy to follow documentation</h3> <p>Yes, if the source isn’t you thing, there still is easy-to-follow documentation. There’s enough there to get you up and running in an evening and you’ll learn a lot of cool tricks too.</p> <h3>5. Minimal to Convert</h3> <p>Lastly, the webapp and Tornado syntax for request handlers are so similar, converting to Tornado from webapp requires minimal effort.</p> <div class=highlight><pre class="highlight python"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class=rouge-code><pre><span class="c"># webapp Request Handler</span>
<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">webapp</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">"Hello World"</span><span class="p">)</span>

<span class="c"># Tornado Request Handler</span>
<span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">tornado</span><span class="o">.</span><span class="n">web</span><span class="o">.</span><span class="n">RequestHandler</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">"Hello World"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></pre></div> <p>There are, of course, a few other differences. For example, fetching the value of a querystring. Webapp uses <code>self.request.get()</code> while Tornado instead does <code>self.get_argument()</code>. The differences are minor and easily done with Find and Replace.</p> </div> </article> </main> </div> <footer> <span>&copy; Titus Stone</span> <a href="/">Home</a> <a href="//github.com/tstone">Github</a> <a href="//twitter.com/andstuff">Twitter</a> </footer> <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-32115012-1', 'auto');
        ga('send', 'pageview');
      </script> </body> </html>
<!doctype html> <html> <head> <meta charset=utf-8 /> <meta http-equiv=X-UA-Compatible content="IE=edge;chrome=1"/> <meta name=viewport content="width=device-width"> <meta property="og:locale" content=en_us> <meta property="og:type" content=article> <meta property="og:title" content="Rust Language"> <meta property="og:url" content="http://array.blue/blog/2014/rust-intro.html"> <meta property="article:published_time" content="2014-09-16T07:00:00Z"> <meta property="article:tag" content=rust> <title>[ Rust Language ].blue</title> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> <link href="//fonts.googleapis.com/css?family=Montserrat:400,700" rel=stylesheet type="text/css" media="(min-width: 767px)"> <link href="/stylesheets/all-2548ef72.css" rel=stylesheet type="text/css"/> <script src="/javascripts/all-641b3993.js"></script> </head> <body class="blog blog_2014 blog_2014_rust-intro" itemscope itemtype="http://schema.org/Blog"> <div class=wrapper> <header class=page> <h1 itemprop=name><a href="/">[ ].blue</a></h1> <h6 itemprop=author>Blog of <span itemprop=givenName>Titus</span> <span itemprop=familyName>Stone</span></h6> </header> <main> <article itemprop=blogPost itemscope itemtype="http://schema.org/BlogPosting"> <h1 class=title itemprop=headline>Rust Language</h1> <h4 class=date itemprop=dateCreated>September 16, 2014</h4> <div itemprop=articleBody> <p>I started playing with <a href="//rust-lang.org">Rust</a> back in December. At the time it was just a <a href="//stackoverflow.com/questions/20790793/using-listt-in-rust">little too unstable</a> for my tastes, but it seemed like there was potential building with it. Some time has passed now and it seems like things are shaping up well.</p> <h2>Cargo</h2> <p>One recent improvement is that Rust now includes a build tool/library management system named <a href="//crates.io/">Cargo</a>. This is a welcome improvement as now days it&#39;s not only the language that matters but the tooling around it. Cargo is extremely easy to use and works similar to how <code>npm</code> does.</p> <p>Creating a new Rust project is as easy as:</p> <div class=highlight><pre class="highlight shell"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class=rouge-code><pre><span class="nv">$ </span>cargo new my_project <span class="nt">--bin</span>
</pre></td></tr></tbody></table></code></pre></div> <p>Building, running, and executing tests all have a command, <code>build</code>, <code>run</code>, and <code>test</code> as one would expect.</p> <h2>Guide</h2> <p>Another nice improvement is that a <a href="//doc.rust-lang.org/guide.html">new guide</a> is available. While it&#39;s not complete (within an hour or two I ran into some sections that basically read like: &quot;TODO&quot;), there is a lot there and it&#39;s clear that it&#39;s headed in a good direction.</p> <h2>Tests</h2> <p>Most of Rust was fairly predictable to me in that the concepts in it I&#39;ve seen or experienced in other languages. The one surprise so far has been Rust&#39;s implementation of tests. As an aside, Rust fits in with the likes of <code>C</code> and <code>C++</code> on the domain of problems that one might solving using it. I&#39;ve observed that lower level systems languages aren&#39;t typically ones that have communities with a strong testing culture (TDD, BDD, whateverDD). As such I&#39;m curious how much that influenced the following.</p> <p>Rust includes two types of tests built into the language: integration and unit. Both, by the way, are executed by <code>cargo test</code>. Integration tests are external to a module and test it from a &quot;black box&quot; perspective. They are stored in a separate <code>test/</code> directory and are to me akin to how one might have RSpec or Specs2 tests in a test folder somewhere at the root of a project.</p> <p>The second type of test, unit tests are 1.) included in the same file as the module being tested and 2.) can see items that are private to the module that they are within. When I first learned of this my immediate reaction was one of dislike. As I let the thought simmer however I realized what the intent might have been.</p> <p>If you&#39;ve ever had the experience of working in a statically typed languages with public/private scoping like Java, Scala, or C# then you&#39;re probably aware of something called &quot;dependency injection&quot;. This is where a class or function will use some mechanism to expose it&#39;s dependencies, perhaps via a constructor or method that can be overridden. During a test the dependency can be replaced by a mocked or stubbed version.</p> <p>A good example of this would be a service interface for an API. The service class will have a dependency on an HTTP client. When running tests we don&#39;t want to actually make HTTP calls over the wire and we want to control the response that is returned so that we can test for different conditions based on what the server might reply with. To do this we want to inject a mock HTTP client that we can control for the duration of our tests but still allow the service class to use an actual HTTP implementation when running in production.</p> <p>There is a lot of ceremony involved in all of that (as I&#39;m sure it sounds just by describing it). It dawned on me that perhaps the unit test approach Rust was taking was an effort to avoid all of that mess. In order for dependency injection to work a class must publicly expose it&#39;s dependencies. With Rust&#39;s unit testing approach the dependencies can remain contained and only modified by the unit test which is allowed to see the private scope of the module.</p> <p>Wether or not this will work out to be a good idea or not only time can tell, however having dealt with the song and dance of dependency injection for a while now I&#39;m open to strategies that lowers the amount of boilerplate around the testing process.</p> <h2>1.0</h2> <p>Rust isn&#39;t yet at a 1.0 stable release at the time of writing, however it&#39;s quickly approaching it and looking at the language now compared to when I first did in December I can already see polish taking place. The Rust team just <a href="//blog.rust-lang.org/2014/09/15/Rust-1.0.html">posted about 1.0 yesterday</a>. The memory safe aspect combined with the low level nature of Rust makes it an enticing language to do some &quot;systems&quot; level projects. Given that I like parsing and the like I wouldn&#39;t mind becoming adept at wiring parsers in Rust. If only I could find an excuse to use it at work now...</p> </div> </article> </main> </div> <footer> <span>&copy; Titus Stone</span> <a href="/">Home</a> <a href="//github.com/tstone">Github</a> <a href="//twitter.com/andstuff">Twitter</a> </footer> <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-32115012-1', 'auto');
        ga('send', 'pageview');
      </script> </body> </html>